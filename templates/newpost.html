{% include "header.html" %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
        function changeTitle() {
            const selectElement = document.getElementById('options');
            const selectedOption = selectElement.options[selectElement.selectedIndex].text;
            const routes = {
                'Writing': '{{ url_for("new_post") }}',
                'Movie Review': '{{ url_for("third.new_review") }}',
                'Book Review': '{{ url_for("books.new_review") }}'
                
            };
            window.location.href = routes[selectedOption];
        }
    </script>

<style>
    .error {
        color:red;
    }


@media (max-width: 576px) {
        .container {
        padding: 10px;
    }
        .form-control {
        font-size: 20px;
        padding: 8px;
    }
    #form-container {
    max-width: 400px
    margin: 0 auto}


}


.page-title {
    text-align: center;
}




</style>
{% if route == 'edit-post' %}
<h2 class='page-title'>Edit Post</h2>
{% else %}
<h2 class='page-title'>New Post</h2>
{% endif %}</div></div></div>
</br>

<body>








<div class="container" >

        <div id='form-container' class="col-lg-8 col-md-10 mx-auto">
    <form method='POST' action=''>
        {% if route != 'edit-post' %}
    {{ form.options.label }}</br>
            {{ form.options(id='options', onchange='changeTitle()') }}
    </br>
    {% endif %}

        <p>{% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="{{ category }}">{{ message }}</p>
            {% endfor %}

        {% endif %}
    {% endwith %}</p>

              {{ form.title.label }}
            </br>
              {{ form.title(class="form-control") }}
              </br>
              </br>
              {{ form.subtitle.label }}
              </br>
              {{ form.subtitle(class="form-control") }}
              </br>
              </br>
              </br>

              {{ form.post_img.label }}
              </br>
              {{ form.post_img(class="form-control") }}
              </br>

            </br>
              {{ form.body.label }}

              {{ form.body() }}
          
          
          
        <button class="btn btn-dark" type='submit' style='position: relative; left: 0px'>Create Post</button>

    </form>
    {{ ckeditor.load(pkg_type='full') }}
    {{ ckeditor.config(name='body') }}

          

      </div>
  </div>
{% include "footer.html" %}